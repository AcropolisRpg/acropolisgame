(function(){var e={38903:function(e,t,i){"use strict";var r=i(49242),s=i(73396);function a(e,t){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i)])}var o=i(40089);const n={},c=(0,o.Z)(n,[["render",a]]);var l=c,p=i(70678);const m={class:"home"};function y(e,t,i,r,a,o){const n=(0,s.up)("AcropolisMain");return(0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)(n)])}var d=i(62900),h=i(66520),g=i(87139);const f=e=>((0,s.dD)("data-v-5742f027"),e=e(),(0,s.Cn)(),e),u={key:0},k=f((()=>(0,s._)("h3",{style:{color:"#fff","text-align":"center",padding:"5px","max-width":"200px",margin:"0 auto"}}," Welcome to Acropolis MMORPG Beta Testing! ",-1))),w={key:1},S=(0,s.uE)('<div style="text-align:center;margin:25px auto;" data-v-5742f027><h3 style="color:#fff;" data-v-5742f027>Acropolis Playgrounds BETA Development!</h3><div id="phaser-example" style="border-radius:100px;" data-v-5742f027></div><h3 style="color:#fff;" data-v-5742f027> Click anywhere to move around or press &quot;QWERASDF&quot; key for skills. </h3><a href="https://www.acropolisrpg.com/" style="color:#fff;" data-v-5742f027>Go to Acropolist home page</a></div><p style="color:#fff;text-align:center;" data-v-5742f027> The first time you login you will receive a reward of 100 $ACR, be wise because that&#39;s the only currency that will be used inside and outside the game. </p><h3 style="color:#fff;text-align:center;" data-v-5742f027> If you can&#39;t see the game screen refresh and login again! </h3><p style="color:#fff;text-align:center;" data-v-5742f027> Server stats. <span id="online" data-v-5742f027>0</span> users online. <span id="fps" data-v-5742f027>0</span> server fps. <span id="worldX" data-v-5742f027>0</span> server fps. <span id="worldY" data-v-5742f027>0</span> server fps. </p>',4),b=[S];function v(e,t,i,r,a,o){return(0,s.wg)(),(0,s.iD)("div",null,[e.isLoggedIn?((0,s.wg)(),(0,s.iD)("div",w,b)):((0,s.wg)(),(0,s.iD)("div",u,[k,(0,s._)("p",{style:{color:"#fff","text-align":"center",border:"1px solid white",padding:"5px","max-width":"200px",margin:"0 auto"},onClick:t[0]||(t[0]=(...t)=>e.initGame&&e.initGame(...t))},(0,g.zw)(e.loginText),1)]))])}var x=i(3836),I=i.n(x),N=i(15941);const D=e=>{const t=e.add.graphics(),i=e.add.graphics(),r=e.add.text(170,240,"Loading Acropolis...");i.fillStyle(2236962,.8),i.fillRect(0,270,600,50),e.load.on("progress",(function(e){N.log(e),t.clear(),t.fillStyle(16777215,1),t.fillRect(10,280,590*e,30)})),e.load.on("fileprogress",(function(e){N.log(e.src)})),e.load.on("complete",(function(){N.log("complete"),t.destroy(),i.destroy(),r.destroy()}))};var R=D;const T=e=>{const t="/game";return t+e},L=(e,t,i)=>e.load.image(t,T(i)),F=(e,t,i)=>e.load.tilemapTiledJSON(t,T(i)),E=(e,t,i,r)=>e.load.spritesheet(t,T(i),r),B=(e,t)=>({frameWidth:e,frameHeight:t}),C=(B(24,24),B(32,32)),H=(B(64,64),B(96,96)),O=B(16,16),A=e=>{const t={key:"running",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:128,end:135}),frameRate:15,repeat:-1};e.anims.create(t);const i={key:"idle",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{frames:[128]}),frameRate:7,repeat:-1};e.anims.create(i);const r={key:"attack",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:1152,end:1155}),frameRate:7,repeat:-1};e.anims.create(r);const s={key:"mining",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:1984,end:1988}),frameRate:7,repeat:-1};e.anims.create(s);const a={key:"gathering",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:640,end:642}),frameRate:7,repeat:-1};e.anims.create(a);const o={key:"chopping",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2240,end:2244}),frameRate:7,repeat:-1};e.anims.create(o);const n={key:"fishing",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:3008,end:3012}),frameRate:7,repeat:0};e.anims.create(n);const c={key:"watering",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2496,end:2497}),frameRate:3,repeat:-1};e.anims.create(c);const l={key:"shoveling",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2752,end:2756}),frameRate:7,repeat:-1};e.anims.create(l);const p={key:"runningShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:200,end:207}),frameRate:15,repeat:-1};e.anims.create(p);const m={key:"idleShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{frames:[160]}),frameRate:7,repeat:-1};e.anims.create(m);const y={key:"attackShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:1440,end:1443}),frameRate:7,repeat:-1};e.anims.create(y);const d={key:"miningShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:2480,end:2483}),frameRate:7,repeat:-1};e.anims.create(d);const h={key:"gatheringShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:800,end:802}),frameRate:7,repeat:-1};e.anims.create(h);const g={key:"choppingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:2800,end:2804}),frameRate:7,repeat:-1};e.anims.create(g);const f={key:"fishingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3760,end:3764}),frameRate:7,repeat:0};e.anims.create(f);const u={key:"wateringShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3120,end:3120}),frameRate:3,repeat:-1};e.anims.create(u);const k={key:"shovelingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3440,end:3444}),frameRate:7,repeat:-1};e.anims.create(k);const w={key:"runningHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:224,end:231}),frameRate:15,repeat:-1};e.anims.create(w);const S={key:"idleHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{frames:[224]}),frameRate:7,repeat:-1};e.anims.create(S);const b={key:"attackHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:2016,end:2019}),frameRate:7,repeat:-1};e.anims.create(b);const v={key:"miningHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:3472,end:3476}),frameRate:7,repeat:-1};e.anims.create(v);const x={key:"gatheringHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:1120,end:1122}),frameRate:7,repeat:-1};e.anims.create(x);const I={key:"choppingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:3920,end:3924}),frameRate:7,repeat:-1};e.anims.create(I);const N={key:"fishingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:5264,end:5268}),frameRate:7,repeat:0};e.anims.create(N);const D={key:"wateringHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:4368,end:4368}),frameRate:3,repeat:-1};e.anims.create(D);const R={key:"shovelingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:4816,end:4820}),frameRate:7,repeat:-1};e.anims.create(R);const T={key:"runningClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:160,end:167}),frameRate:15,repeat:-1};e.anims.create(T);const L={key:"idleClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{frames:[160]}),frameRate:7,repeat:-1};e.anims.create(L);const F={key:"attackClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:1440,end:1443}),frameRate:7,repeat:-1};e.anims.create(F);const E={key:"miningClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:2480,end:2483}),frameRate:7,repeat:-1};e.anims.create(E);const B={key:"gatheringClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:800,end:802}),frameRate:7,repeat:-1};e.anims.create(B);const C={key:"choppingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:2800,end:2804}),frameRate:7,repeat:-1};e.anims.create(C);const H={key:"fishingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3760,end:3764}),frameRate:7,repeat:0};e.anims.create(H);const O={key:"wateringClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3120,end:3121}),frameRate:3,repeat:-1};e.anims.create(O);const A={key:"shovelingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3440,end:3444}),frameRate:7,repeat:-1};e.anims.create(A)};var P=A,Z=i(51038);const q=e=>{const t={cooldownTime:e,currentTime:e,isReady:!0,triggered:!1},i=i=>{t.isReady&&t.triggered&&t.currentTime===e?(t.isReady=!1,t.currentTime=t.cooldownTime):!t.isReady&&t.triggered&&(t.currentTime=t.currentTime-i,t.currentTime<0&&(t.currentTime=e,t.triggered=!1,t.isReady=!0))},r=()=>{t.triggered=!0};return{timer:t,timeCounter:i,trigger:r}},M=(e,t)=>{const i="Q,W,E,R,A,S,D,F",r=e.input.keyboard.addKeys(i),s=i.split(","),a=q(100),o=e.input.activePointer;return(0,Z.Ur)((e=>{const i=window.acropolis.networkSystem.getLocalEntityByNetworkId(window.acropolis.currentPlayerId);a.timeCounter(window.acropolis.timeSystem.clientDeltaTimeNoFR);for(let n=0;n<s.length;n++){const e=s[n];if(r[e].isDown)switch(e){case"Q":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","skill"),t.emit("playerSkillPosition",{x:o.worldX,y:o.worldY})),i.action="skill";break;case"W":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","attack")),i.action="attack";break;case"E":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","mining")),i.action="mining";break;case"R":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","gathering")),i.action="gathering";break;case"A":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","chopping")),i.action="chopping";break;case"S":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","fishing")),i.action="fishing";break;case"D":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","watering")),i.action="watering";break;case"F":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","shoveling")),i.action="shoveling";break;default:break}}return e}))};var j=M;const U={x:Z.Yk.f32,y:Z.Yk.f32},Y=(0,Z.aZ)({actions:Z.Yk.ui8}),_=()=>(0,Z.aZ)({position:U,type:Z.Yk.ui8,parentRef:Z.Yk.ui8,currentStats:{max:Z.Yk.f32,current:Z.Yk.f32}}),W=(_(),_(),(0,Z.aZ)(U)),G=(0,Z.aZ)(U),X=((0,Z.aZ)({texture:Z.Yk.ui8}),(0,Z.aZ)({texture:Z.Yk.ui8})),J=(0,Z.aZ)({texture:Z.Yk.ui8}),Q=(0,Z.aZ)({texture:Z.Yk.ui8}),V=(0,Z.aZ)({texture:Z.Yk.ui8}),z=((0,Z.aZ)(U),(0,Z.aZ)());var K=i(15941);const $=(e,t)=>{const i=(0,Z.kZ)([X]),r=(0,Z.Ai)(i),s=(0,Z.xE)(i),a=window.acropolis.timeSystem,o=window.acropolis.networkSystem.getLocalEntityByLocalId;return(0,Z.Ur)((t=>{const n=r(t);for(let i=0;i<n.length;i++){const t=n[i],r=o(t);r.sprites={},r.sprites.body=e.add.sprite(0,0,"bodySpriteSheet"),r.sprites.clothes=e.add.sprite(0,0,"clothesSpriteSheet"),r.sprites.shoes=e.add.sprite(0,0,"shoesSpriteSheet"),r.sprites.hair=e.add.sprite(0,0,"gentlemanHairSpriteSheet")}const c=i(t);for(let i=0;i<c.length;i++){const t=c[i],r=o(t),{body:s,clothes:n,shoes:l,hair:p}=r.sprites;s&&(s.x=W.x[t],s.y=W.y[t],n.x=W.x[t],n.y=W.y[t],l.x=W.x[t],l.y=W.y[t],p.x=W.x[t],p.y=W.y[t],r.position.x=W.x[t],r.position.y=W.y[t],window.acropolis.currentPlayerId===r.id&&(e.cameras.main.startFollow(r.sprites.body,!1,a.clientDeltaTime*a.correction,a.clientDeltaTime*a.correction),e.cameras.main.zoom=1,e.cameras.main.roundPixels=!0))}const l=s(t);for(let e=0;e<l.length;e++){const t=l[e],i=o(t),{body:r,clothes:s,shoes:a,hair:n}=i.sprites;K.log("spriteQuery Exit"),r&&(r.destroy(),s.destroy(),a.destroy(),n.destroy())}return t}))},ee=()=>(0,Z.Ur)((e=>{const t=window.acropolis.networkSystem.getNetworkEntities(),i=window.acropolis.networkSystem.getNetworkEntitiesIDsByLocalID(),r=window.acropolis.networkSystem.getLocalEntitiesIDsByNetworkID();for(const[s,a]of Object.entries(t))if(!(r?.[s]>=0&&(0,Z.zw)(e,r[s]))){if("player"===a.type){const t=(0,Z.Ce)(e),i=JSON.parse(JSON.stringify(a));window.acropolis.networkSystem.setLocalEntityByLocalId(t,i),window.acropolis.networkSystem.setLocalEntityIDbyNetworkID(s,t),window.acropolis.networkSystem.setNetworkEntityIDbyLocalID(s,t),(0,Z.Tk)(e,W,t),(0,Z.Tk)(e,X,t),(0,Z.Tk)(e,J,t),(0,Z.Tk)(e,Q,t),(0,Z.Tk)(e,V,t),(0,Z.Tk)(e,G,t),(0,Z.Tk)(e,Y,t)}if("resource"===a.type){const t=(0,Z.Ce)(e),i=JSON.parse(JSON.stringify(a));window.acropolis.networkSystem.setLocalEntityByLocalId(t,i),window.acropolis.networkSystem.setLocalEntityIDbyNetworkID(s,t),window.acropolis.networkSystem.setNetworkEntityIDbyLocalID(s,t),(0,Z.Tk)(e,W,t),(0,Z.Tk)(e,z,t)}}for(const[s,a]of Object.entries(i)){let i=!1;for(const[e]of Object.entries(t))a===e&&(i=!0);i||(0,Z.Sx)(e,Number(s))}return e})),te=(e,t,i)=>(1-i)*e+i*t,ie=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),re=(e,t=!1)=>{for(const[i]of Object.entries(e))"body"!==i&&"clothes"!==i&&"shoes"!==i&&"hair"!==i||(e[i].flipX=t)},se=(e,t)=>{const i=(0,Z.kZ)([G,W]),r=e.input.activePointer,s=q(100);return(0,Z.Ur)((e=>{s.timeCounter(window.acropolis.timeSystem.clientDeltaTimeNoFR);const a=window.acropolis.timeSystem.clientDeltaTime,o=i(e);for(let i=0;i<o.length;i++){const e=o[i],n=window.acropolis.networkSystem.getNetworkEntityByLocalId(e);if(!n||window?.acropolis?.inventory?.inventoryOpen)continue;W.x[e]=te(W.x[e],n.position.x,a),W.y[e]=te(W.y[e],n.position.y,a);const c=window.acropolis.networkSystem.getLocalEntityByLocalId(e);if(!c?.sprites?.body)continue;const l=ie(c.sprites.body,n.target);if("running"!==c.action&&l>1&&(c.action="running"),"idle"!==c.action&&l<1&&(c.action="idle"),c.sprites.body.x<n.target.x?re(c.sprites):re(c.sprites,!0),r.leftButtonDown()&&!r.leftButtonReleased()&&s.timer.isReady){if(s.trigger(),c.sprites.body.x<r.worldX?re(c.sprites):re(c.sprites,!0),r.y>550&&r.x>550)return;t.emit("playerTarget",{x:Math.round(r.worldX),y:Math.round(r.worldY)})}}return e}))},ae=()=>{window.acropolis.timeSystem={};const e=window.acropolis.timeSystem;return e.frameRate=1e3/60,e.clientDeltaTime=1,e.clientLastUpdate=Date.now(),e.clientLastDeltaTime=1,e.clientDeltaTimeNoFR=0,(0,Z.Ur)((t=>{const i=Date.now();return e.clientDeltaTimeNoFR=i-e.clientLastUpdate,e.clientDeltaTime=(i-e.clientLastUpdate)/e.frameRate,e.clientLastUpdate=i,e.correction=e.clientDeltaTime/e.clientLastDeltaTime,e.clientLastDeltaTime=e.clientDeltaTime,t}))},oe=(e,t,i)=>{switch(t){case"running":i.sprites.body.play({key:"running"}),i.sprites.shoes.play({key:"runningShoes"}),i.sprites.hair.play({key:"runningHair"}),i.sprites.clothes.play({key:"runningClothes"});break;case"idle":i.sprites.body.play({key:"idle"}),i.sprites.shoes.play({key:"idleShoes"}),i.sprites.hair.play({key:"idleHair"}),i.sprites.clothes.play({key:"idleClothes"});break;case"attack":i.sprites.body.play({key:"attack"}),i.sprites.shoes.play({key:"attackShoes"}),i.sprites.hair.play({key:"attackHair"}),i.sprites.clothes.play({key:"attackClothes"});break;case"mining":i.sprites.body.play({key:"mining"}),i.sprites.shoes.play({key:"miningShoes"}),i.sprites.hair.play({key:"miningHair"}),i.sprites.clothes.play({key:"miningClothes"});break;case"gathering":i.sprites.body.play({key:"gathering"}),i.sprites.shoes.play({key:"gatheringShoes"}),i.sprites.hair.play({key:"gatheringHair"}),i.sprites.clothes.play({key:"gatheringClothes"});break;case"chopping":i.sprites.body.play({key:"chopping"}),i.sprites.shoes.play({key:"choppingShoes"}),i.sprites.hair.play({key:"choppingHair"}),i.sprites.clothes.play({key:"choppingClothes"});break;case"fishing":i.sprites.body.play({key:"fishing"}),i.sprites.shoes.play({key:"fishingShoes"}),i.sprites.hair.play({key:"fishingHair"}),i.sprites.clothes.play({key:"fishingClothes"});break;case"watering":i.sprites.body.play({key:"watering"}),i.sprites.shoes.play({key:"wateringShoes"}),i.sprites.hair.play({key:"wateringHair"}),i.sprites.clothes.play({key:"wateringClothes"});break;case"shoveling":i.sprites.body.play({key:"shoveling"}),i.sprites.shoes.play({key:"shovelingShoes"}),i.sprites.hair.play({key:"shovelingHair"}),i.sprites.clothes.play({key:"shovelingClothes"});break;default:break}};var ne=oe;const ce=e=>{const t=[];return(0,Z.Ur)((i=>{const r=window.acropolis.networkSystem.getNetworkEntities();for(const[s,a]of Object.entries(r))"player"===a.type&&t[s]!==a.action&&(t[s]=a.action,ne(e,a.action,window.acropolis.networkSystem.getLocalEntityByNetworkId(s)));return i}))};var le=ce,pe=i(15941);const me=e=>{const t=(0,Z.kZ)([z]),i=(0,Z.Ai)(t),r=(0,Z.xE)(t),s=(window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId);return(0,Z.Ur)((a=>{const o=i(a);for(let t=0;t<o.length;t++){const i=o[t],r=s(i);r.sprites={},"tree"===r.category&&(r.sprites.body=e.add.sprite(r.position.x,r.position.y-15,"trees"),r.sprites.body.setScale(2)),"herb"===r.category&&(pe.log("pintalamadre"),r.sprites.body=e.add.sprite(r.position.x,r.position.y-5,"globalNature"),r.sprites.body.setFrame(60),r.sprites.body.setScale(2)),"stone"===r.category&&(pe.log("pintalamadre"),r.sprites.body=e.add.sprite(r.position.x,r.position.y+5,"TXprops"),r.sprites.body.setFrame(245))}const n=t(a);for(let e=0;e<n.length;e++){const t=n[e],i=s(t),{body:r}=i.sprites;r&&("tree"===i.category&&(r.x=i.position.x,r.y=i.position.y-15),"herb"===i.category&&(r.x=i.position.x,r.y=i.position.y))}const c=r(a);for(let e=0;e<c.length;e++){const t=c[e],i=s(t),{body:r,clothes:a,shoes:o}=i.sprites;pe.log("resourceQuery Exit"),r&&r.destroy()}return a}))},ye=e=>{const t=(0,Z.kZ)([X]),i=(0,Z.Ai)(t),r=(0,Z.xE)(t),s=(window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId);return(0,Z.Ur)((a=>{const o=i(a);for(let t=0;t<o.length;t++){const i=o[t],r=s(i);r.sprites.healthBarDecoration=e.add.sprite(50,15,"healthBarDecoration"),r.sprites.healthBarDecoration.setScrollFactor(0,0),r.sprites.healthBar=e.add.sprite(57,15,"healthBar"),r.sprites.healthBar.setScrollFactor(0,0)}const n=t(a);for(let e=0;e<n.length;e++){const t=n[e],i=s(t),r=window.acropolis.networkSystem.getNetworkEntityByLocalId(t);if(r.healthPoints<100){const e=r.healthPoints/100;i.healthPoints=r.healthPoints,i.sprites.healthBar.setCrop(0,0,50*e,10)}}const c=r(a);for(let e=0;e<c.length;e++){const t=c[e],i=s(t),{healthBar:r,healthBarDecoration:a}=i.sprites;r&&(r.destroy(),a.destroy())}return a}))},de=e=>{const t=(0,Z.kZ)([X]);(0,Z.Ai)(t),(0,Z.xE)(t),window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId;let i=!1,r=288,s=416,a=1;const o=[];let n,c,l=288,p=416,m=1;const y=()=>{for(let e=0;e<4;e++){l=288;for(let e=0;e<8;e++)o.push({id:m,position:{x:l,y:p},itemId:""}),l+=32,m++;p+=32}},d=(t,i)=>{i.sprites.items[t].sprite.setInteractive(),i.sprites.items[t].sprite.setData({id:t}),i.sprites.items[t].sprite.setScrollFactor(0,0),i.sprites.items[t].qty.setData({id:t}),i.sprites.items[t].qty.setInteractive({draggable:!0,hitArea:new Phaser.Geom.Rectangle(-16,-16,32,32),hitAreaCallback:function(e,t,i){return Phaser.Geom.Rectangle.Contains(e,t,i)}}),i.sprites.items[t].qty.setScrollFactor(0,0),e.input.setDraggable(i.sprites.items[t].sprite)},h=()=>{r+=32,a++,a>8&&(s+=32,r=288)},g=(e,t)=>{o.forEach((i=>{i.position.x===t.sprite.x&&i.position.y===t.sprite.y&&(i.itemId=e)}))},f=(e,t)=>{switch(e){case"basicWood":t.sprites.items[e].sprite.setFrame(958);break;case"basicStone":t.sprites.items[e].sprite.setFrame(859);break;case"basicHerb":t.sprites.items[e].sprite.setFrame(288);break;default:break}},u=()=>{e.input.on("drag",(function(e,t,i,r){i>=288&&i<=512&&r>=416&&r<=512&&(t.x=Phaser.Math.Snap.To(i,32),t.y=Phaser.Math.Snap.To(r,32),o.forEach((e=>{if(e.position.y===t.y&&e.position.x===t.x&&e.itemId){const i=o.find((e=>e.itemId===t.getData("id")));if(i){const t=i.itemId,r=n.sprites.items[e.itemId];r.sprite.x=i.position.x,r.sprite.y=i.position.y,r.qty.x=i.position.x,r.qty.y=i.position.y,i.itemId=e.itemId,e.itemId=t}}else if(e.position.y===t.y&&e.position.x===t.x){const i=o.find((e=>e.itemId===t.getData("id")));e.itemId=t.getData("id"),i.itemId=""}})))}))},k=t=>{t.sprites.inventory=e.add.sprite(400,370,"inventory"),t.sprites.backpack=e.add.sprite(575,575,"backpack"),e.input.topOnly=!1,t.sprites.backpack.setScrollFactor(0,0),t.sprites.backpack.setInteractive(),window.acropolis.inventory={},window.acropolis.inventory.inventoryOpen=!0,t.sprites.inventory.setScrollFactor(0,0),t.sprites.inventory.setInteractive(),t.sprites.inventory.setScale(2),t.sprites.backpack.setName("backpack")},w=()=>{e.input.on("pointerdown",((e,t)=>{if("backpack"===t?.[0]?.name){if(window.acropolis.inventory.inventoryOpen=!window.acropolis.inventory.inventoryOpen,n?.sprites?.items)for(const[,e]of Object.entries(n.sprites.items))e.sprite.setVisible(!e.sprite.visible),e.qty.setVisible(!e.qty.visible);n.sprites.inventory.setVisible(!n.sprites.inventory.visible)}}))};return(0,Z.Ur)((t=>{if(window?.acropolis?.currentPlayerId){if(n=window.acropolis.networkSystem.getLocalEntityByNetworkId(window.acropolis.currentPlayerId),c=window.acropolis.networkSystem.getNetworkEntityByNetworkID(window.acropolis.currentPlayerId),null===n?.items&&(n.items=c.items),i&&c?.items&&n?.items)for(const[t,i]of Object.entries(c.items)){if(n.sprites.items[t]){n.sprites.items[t].qty.setText(i.quantity);continue}const a={sprite:e.add.sprite(r,s,"icons"),qty:e.add.text(r,s,i.quantity)};n.sprites.items[t]=a;const o=window.acropolis.inventory.inventoryOpen;a.sprite.setVisible(o),a.qty.setVisible(o),g(t,a),f(t,n),d(t,n),h()}if(!i&&n?.sprites){if(i=!0,k(n),y(),n.sprites.items={},c?.items&&n?.items)for(const[t,i]of Object.entries(c.items)){if(n.sprites.items[t])continue;const a={sprite:e.add.sprite(r,s,"icons"),qty:e.add.text(r,s,i.quantity)};n.sprites.items[t]=a,g(t,a),f(t,n),d(t,n),h()}return u(),w(),t}}}))};var he=i(15941);const ge=e=>(0,Z.Ur)((t=>{const i=window.acropolis.networkSystem.getNetworkEntities();for(const[r,s]of Object.entries(i)){const t=window.acropolis.networkSystem.getLocalEntityByNetworkId(r);s?.skillPosition?t?.skill||(he.log("crea el puto skill"),t.skill={},t.sprites.skill=e.add.sprite(s.skillPosition.x,s.skillPosition.y,"balla")):t?.skill&&(he.log("destroye el puto skill"),t.sprites.skill.destroy(),t.skill=null)}return t}));class fe extends I().Scene{init(e){this.lobbyScene={},this.lobbyScene.socket=e.socket}preload(){R(this),L(this,"ball","/game/sprites/spikedballa.png"),L(this,"atlas","/game/tiled/atlas.png"),F(this,"forestkey","/game/tiled/forest1.json"),E(this,"bodySpriteSheet","/game/character/characters/char_all.png",C),E(this,"shoesSpriteSheet","/game/character/clothes/shoes.png",C),E(this,"gentlemanHairSpriteSheet","/game/character/hair/gentleman.png",C),E(this,"clothesSpriteSheet","/game/character/clothes/basic.png",C),E(this,"balla","/game/sprites/spikedballa.png",H),E(this,"trees","/game/nature/global.png",C),E(this,"globalNature","/game/nature/global.png",O),E(this,"TXprops","/game/rpg-pack/Texture/TXProps.png",C),E(this,"healthBarDecoration","/game/statusbar/health_bar_decoration.png",{frameWidth:64,frameHeight:17}),E(this,"healthBar","/game/statusbar/health_bar.png",{frameWidth:49,frameHeight:17}),E(this,"backpack","/game/rpg-pack/UI/backpack.png",C),E(this,"backpack","/game/rpg-pack/UI/backpack.png",C),E(this,"inventory","/game/rpg-pack/UI/inventory.png",{frameWidth:192,frameHeight:192}),E(this,"icons","/game/icons/icons_full_32.png",C)}create(){this.world=(0,Z.hW)(),this.timeSystem=ae(),this.entitySystem=ee(),this.itemsSystem=de(this),this.gameControllerSystem=j(this,this.lobbyScene.socket),this.spriteSystem=$(this,["bodySpriteSheet","clothesSpriteSheet","shoesSpriteSheet"]),this.skillsSystem=ge(this),this.healthBarSystem=ye(this),this.animationSystem=le(this),this.targetMovementSystem=se(this,this.lobbyScene.socket),this.resourceSpriteSystem=me(this);const e=this.make.tilemap({key:"forestkey",tileWidth:16,tileHeight:16}),t=e.addTilesetImage("atlas","atlas");e.createLayer("piso",t,0,0),e.createLayer("caminos",t,0,0),e.createLayer("plantas",t,0,0),e.createLayer("construcciones",t,0,0),P(this),this.cameras.main.setBounds(0,0,1e3,1e3),this.input.mouse.disableContextMenu(),setInterval((()=>{this.world&&this.spriteSystem&&this.entitySystem&&this.targetMovementSystem&&this.timeSystem&&(this.itemsSystem(this.world),this.timeSystem(this.world),this.entitySystem(this.world),this.spriteSystem(this.world),this.healthBarSystem(this.world),this.resourceSpriteSystem(this.world),this.skillsSystem(this.world),this.targetMovementSystem(this.world),this.gameControllerSystem(this.world),this.animationSystem(this.world))}),window.acropolis.timeSystem.frameRate)}}var ue=i(68993),ke=i(35085),we=i.n(ke),Se=i(77067),be=i.n(Se);const ve=e=>{const t={},i={},r={};let s={};e.on("broadcastNetworkClient",(e=>{s=e}));const a=e=>{delete t[e]},o=e=>{delete i[e]},n=e=>{delete r[e]},c=(e,t)=>{i[e]=t},l=e=>s[e],p=e=>i[e],m=()=>t,y=()=>i,d=(e,t)=>{r[e]=t},h=e=>{const t=r[e];return t},g=e=>{const t=r[p(e)];return t},f=()=>s,u=()=>r,k=(e,i)=>{t[i]=e},w=e=>t[e],S=e=>{const t=s[w(e)];return t};return{deleteNetworkEntityIDByLocalID:a,deleteLocalEntityIDByNetworkID:o,deleteLocalEntity:n,getLocalEntitiesIDsByNetworkID:y,getNetworkEntitiesIDsByLocalID:m,getNetworkEntities:f,getNetworkEntityByLocalId:S,getNetworkEntityByNetworkID:l,getLocalEntities:u,getLocalEntityByLocalId:h,getLocalEntityByNetworkId:g,setLocalEntityByLocalId:d,setNetworkEntityIDbyLocalID:k,getNetworkEntityIDbyLocalID:w,getLocalEntityIDbyNetworkID:p,setLocalEntityIDbyNetworkID:c}};var xe=i(15941);let Ie;Ie=(0,ue.ZP)(window.location.origin,{path:"/gameSocket"});var Ne=(0,s.aZ)({name:"AcropolisMain",data(){return{isLoggedIn:!1,loginText:"Click here to Login!"}},methods:{initGame(){const e=async()=>{await Ie.once("connect",(()=>{Ie.emit("register",(e=>{xe.log("socketId",e)}))}));const e=new(we())(window.ethereum);await window.ethereum.request({method:"eth_requestAccounts"});const t=(await e.eth.getAccounts())[0],i=await be().sign((i=>e.eth.personal.sign(i,t)),"1d");xe.log(i),Ie.emit("login",i)};e()}},mounted(){Ie.on("loggedIn",(e=>{const{isLoggedIn:t,entityId:i}=e;xe.log("logeeasdfa",t),t?(window.acropolis={},window.acropolis.networkSystem=ve(Ie),window.acropolis.currentPlayerId=i,window.acropolis.socket=Ie,this.isLoggedIn=t,setTimeout((()=>{const e={type:I().AUTO,scale:{parent:"phaser-example",mode:I().Scale.FIT,width:600,height:600}},t=new(I().Game)(e);t.scene.add("acropolisGame",fe),t.scene.start("acropolisGame",{socket:Ie})}),3e3)):this.loginText="Account already logged in!"}))}});const De=(0,o.Z)(Ne,[["render",v],["__scopeId","data-v-5742f027"]]);var Re=De;let Te=class extends h.w3{};Te=(0,d.gn)([(0,h.Ei)({components:{AcropolisMain:Re}})],Te);var Le=Te;const Fe=(0,o.Z)(Le,[["render",y]]);var Ee=Fe;const Be=[{path:"/",name:"Home",component:Ee}],Ce=(0,p.p7)({history:(0,p.r5)(),routes:Be});var He=Ce;(0,r.ri)(l).use(He).mount("#app")},88677:function(){},62808:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},27790:function(){},52361:function(){},94616:function(){},6567:function(){},55896:function(){},87500:function(){}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,r,s,a){if(!r){var o=1/0;for(p=0;p<e.length;p++){r=e[p][0],s=e[p][1],a=e[p][2];for(var n=!0,c=0;c<r.length;c++)(!1&a||o>=a)&&Object.keys(i.O).every((function(e){return i.O[e](r[c])}))?r.splice(c--,1):(n=!1,a<o&&(o=a));if(n){e.splice(p--,1);var l=s();void 0!==l&&(t=l)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[r,s,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,a,o=r[0],n=r[1],c=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(c)var p=c(i)}for(t&&t(r);l<o.length;l++)a=o[l],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(p)},r=self["webpackChunkacropolis"]=self["webpackChunkacropolis"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(38903)}));r=i.O(r)})();
//# sourceMappingURL=app.8ac3d901.js.map