(function(){var e={20517:function(e,t,i){"use strict";var s=i(49242),r=i(73396);function a(e,t){const i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i)])}var o=i(40089);const n={},l=(0,o.Z)(n,[["render",a]]);var c=l,p=i(70678);const m={class:"home"};function y(e,t,i,s,a,o){const n=(0,r.up)("AcropolisMain");return(0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(n)])}var d=i(62900),h=i(66520),g=i(87139);const u={key:0},w=(0,r._)("h3",{style:{color:"#fff","text-align":"center",padding:"5px","max-width":"200px",margin:"0 auto"}}," Welcome to Acropolis MMORPG Beta Testing! ",-1),f={key:1},k=(0,r.uE)('<div style="text-align:center;margin:25px auto;"><h3 style="color:#fff;">Acropolis Playgrounds BETA Development!</h3><div id="phaser-example" style="width:100%;"></div><h3 style="color:#fff;"> Click anywhere to move around or press &quot;QWERASDF&quot; key for skills. </h3><a href="https://www.acropolisrpg.com/" style="color:#fff;">Go to Acropolist home page</a></div><p style="color:#fff;text-align:center;"> The first time you login you will receive a reward of 100 $ACR, be wise because that&#39;s the only currency that will be used inside and outside the game. </p><h3 style="color:#fff;text-align:center;"> If you can&#39;t see the game screen refresh and login again! </h3><p style="color:#fff;text-align:center;"> Server stats. <span id="online">0</span> users online. <span id="fps">0</span> server fps. <span id="worldX">0</span> server fps. <span id="worldY">0</span> server fps. </p>',4),S=[k];function b(e,t,i,s,a,o){return(0,r.wg)(),(0,r.iD)("div",null,[e.isLoggedIn?((0,r.wg)(),(0,r.iD)("div",f,S)):((0,r.wg)(),(0,r.iD)("div",u,[w,(0,r._)("p",{style:{color:"#fff","text-align":"center",border:"1px solid white",padding:"5px","max-width":"200px",margin:"0 auto"},onClick:t[0]||(t[0]=(...t)=>e.initGame&&e.initGame(...t))},(0,g.zw)(e.loginText),1)]))])}var v=i(3836),x=i.n(v),I=i(15941);const N=e=>{const t=e.add.graphics(),i=e.add.graphics(),s=e.add.text(170,240,"Loading Acropolis...");i.fillStyle(2236962,.8),i.fillRect(0,270,600,50),e.load.on("progress",(function(e){I.log(e),t.clear(),t.fillStyle(16777215,1),t.fillRect(10,280,590*e,30)})),e.load.on("fileprogress",(function(e){I.log(e.src)})),e.load.on("complete",(function(){I.log("complete"),t.destroy(),i.destroy(),s.destroy()}))};var R=N,D=i(15941);const F=e=>{let t="";return D.log("pathhandler envi prod"),t="/game",t+e},T=(e,t,i)=>e.load.image(t,F(i)),L=(e,t,i)=>e.load.tilemapTiledJSON(t,F(i)),E=(e,t,i,s)=>e.load.spritesheet(t,F(i),s),B=(e,t,i,s)=>e.load.audio(t,F(i),s),C=(e,t)=>({frameWidth:e,frameHeight:t}),H=(C(24,24),C(32,32)),O=(C(64,64),C(96,96)),P=C(16,16),A=e=>{const t={key:"running",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:128,end:135}),frameRate:15,repeat:-1};e.anims.create(t);const i={key:"idle",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{frames:[128]}),frameRate:7,repeat:-1};e.anims.create(i);const s={key:"attack",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:1152,end:1155}),frameRate:7,repeat:-1};e.anims.create(s);const r={key:"mining",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:1984,end:1988}),frameRate:7,repeat:-1};e.anims.create(r);const a={key:"gathering",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:640,end:642}),frameRate:7,repeat:-1};e.anims.create(a);const o={key:"chopping",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2240,end:2244}),frameRate:7,repeat:-1};e.anims.create(o);const n={key:"fishing",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:3008,end:3012}),frameRate:7,repeat:0};e.anims.create(n);const l={key:"watering",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2496,end:2497}),frameRate:3,repeat:-1};e.anims.create(l);const c={key:"shoveling",frames:e.anims.generateFrameNumbers("bodySpriteSheet",{start:2752,end:2756}),frameRate:7,repeat:-1};e.anims.create(c);const p={key:"runningShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:200,end:207}),frameRate:15,repeat:-1};e.anims.create(p);const m={key:"idleShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{frames:[160]}),frameRate:7,repeat:-1};e.anims.create(m);const y={key:"attackShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:1440,end:1443}),frameRate:7,repeat:-1};e.anims.create(y);const d={key:"miningShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:2480,end:2483}),frameRate:7,repeat:-1};e.anims.create(d);const h={key:"gatheringShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:800,end:802}),frameRate:7,repeat:-1};e.anims.create(h);const g={key:"choppingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:2800,end:2804}),frameRate:7,repeat:-1};e.anims.create(g);const u={key:"fishingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3760,end:3764}),frameRate:7,repeat:0};e.anims.create(u);const w={key:"wateringShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3120,end:3120}),frameRate:3,repeat:-1};e.anims.create(w);const f={key:"shovelingShoes",frames:e.anims.generateFrameNumbers("shoesSpriteSheet",{start:3440,end:3444}),frameRate:7,repeat:-1};e.anims.create(f);const k={key:"runningHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:224,end:231}),frameRate:15,repeat:-1};e.anims.create(k);const S={key:"idleHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{frames:[224]}),frameRate:7,repeat:-1};e.anims.create(S);const b={key:"attackHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:2016,end:2019}),frameRate:7,repeat:-1};e.anims.create(b);const v={key:"miningHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:3472,end:3476}),frameRate:7,repeat:-1};e.anims.create(v);const x={key:"gatheringHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:1120,end:1122}),frameRate:7,repeat:-1};e.anims.create(x);const I={key:"choppingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:3920,end:3924}),frameRate:7,repeat:-1};e.anims.create(I);const N={key:"fishingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:5264,end:5268}),frameRate:7,repeat:0};e.anims.create(N);const R={key:"wateringHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:4368,end:4368}),frameRate:3,repeat:-1};e.anims.create(R);const D={key:"shovelingHair",frames:e.anims.generateFrameNumbers("gentlemanHairSpriteSheet",{start:4816,end:4820}),frameRate:7,repeat:-1};e.anims.create(D);const F={key:"runningClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:160,end:167}),frameRate:15,repeat:-1};e.anims.create(F);const T={key:"idleClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{frames:[160]}),frameRate:7,repeat:-1};e.anims.create(T);const L={key:"attackClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:1440,end:1443}),frameRate:7,repeat:-1};e.anims.create(L);const E={key:"miningClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:2480,end:2483}),frameRate:7,repeat:-1};e.anims.create(E);const B={key:"gatheringClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:800,end:802}),frameRate:7,repeat:-1};e.anims.create(B);const C={key:"choppingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:2800,end:2804}),frameRate:7,repeat:-1};e.anims.create(C);const H={key:"fishingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3760,end:3764}),frameRate:7,repeat:0};e.anims.create(H);const O={key:"wateringClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3120,end:3121}),frameRate:3,repeat:-1};e.anims.create(O);const P={key:"shovelingClothes",frames:e.anims.generateFrameNumbers("clothesSpriteSheet",{start:3440,end:3444}),frameRate:7,repeat:-1};e.anims.create(P)};var Z=A,q=i(51038);const M=e=>{const t={cooldownTime:e,currentTime:e,isReady:!0,triggered:!1},i=i=>{t.isReady&&t.triggered&&t.currentTime===e?(t.isReady=!1,t.currentTime=t.cooldownTime):!t.isReady&&t.triggered&&(t.currentTime=t.currentTime-i,t.currentTime<0&&(t.currentTime=e,t.triggered=!1,t.isReady=!0))},s=()=>{t.triggered=!0};return{timer:t,timeCounter:i,trigger:s}},j=(e,t)=>{const i="Q,W,E,R,A,S,D,F",s=e.input.keyboard.addKeys(i),r=i.split(","),a=M(100),o=e.input.activePointer;return(0,q.Ur)((e=>{const i=window.acropolis.networkSystem.getLocalEntityByNetworkId(window.acropolis.currentPlayerId);a.timeCounter(window.acropolis.timeSystem.clientDeltaTimeNoFR);for(let n=0;n<r.length;n++){const e=r[n];if(s[e].isDown)switch(e){case"Q":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","skill"),t.emit("playerSkillPosition",{x:o.worldX,y:o.worldY})),i.action="skill";break;case"W":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","attack")),i.action="attack";break;case"E":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","mining")),i.action="mining";break;case"R":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","gathering")),i.action="gathering";break;case"A":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","chopping")),i.action="chopping";break;case"S":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","fishing")),i.action="fishing";break;case"D":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","watering")),i.action="watering";break;case"F":a.timer.isReady&&(a.trigger(),t.emit("playerTarget",{x:i.position.x,y:i.position.y}),t.emit("playerAction","shoveling")),i.action="shoveling";break;default:break}}return e}))};var U=j;const W={x:q.Yk.f32,y:q.Yk.f32},Y=(0,q.aZ)({actions:q.Yk.ui8}),_=()=>(0,q.aZ)({position:W,type:q.Yk.ui8,parentRef:q.Yk.ui8,currentStats:{max:q.Yk.f32,current:q.Yk.f32}}),G=(_(),_(),(0,q.aZ)(W)),X=(0,q.aZ)(W),J=((0,q.aZ)({texture:q.Yk.ui8}),(0,q.aZ)({texture:q.Yk.ui8})),Q=(0,q.aZ)({texture:q.Yk.ui8}),V=(0,q.aZ)({texture:q.Yk.ui8}),z=(0,q.aZ)({texture:q.Yk.ui8}),K=((0,q.aZ)(W),(0,q.aZ)());var $=i(15941);const ee=(e,t)=>{const i=(0,q.kZ)([J]),s=(0,q.Ai)(i),r=(0,q.xE)(i),a=window.acropolis.timeSystem,o=window.acropolis.networkSystem.getLocalEntityByLocalId;return(0,q.Ur)((t=>{const n=s(t);for(let i=0;i<n.length;i++){const t=n[i],s=o(t),r=window.acropolis.networkSystem.getNetworkEntityByLocalId(t);s.sprites={},s.sprites.body=e.add.sprite(0,0,"bodySpriteSheet"),s.sprites.clothes=e.add.sprite(0,0,"clothesSpriteSheet"),s.sprites.shoes=e.add.sprite(0,0,"shoesSpriteSheet"),s.sprites.hair=e.add.sprite(0,0,"gentlemanHairSpriteSheet"),G.x[t]=r.position.x,G.y[t]=r.position.y,s.position.x=G.x[t],s.position.y=G.y[t]}const l=i(t);for(let i=0;i<l.length;i++){const t=l[i],s=o(t),{body:r,clothes:n,shoes:c,hair:p}=s.sprites;r&&(r.x=G.x[t],r.y=G.y[t],n.x=G.x[t],n.y=G.y[t],c.x=G.x[t],c.y=G.y[t],p.x=G.x[t],p.y=G.y[t],s.position.x=G.x[t],s.position.y=G.y[t],window.acropolis.currentPlayerId===s.id&&(e.cameras.main.startFollow(s.sprites.body,!0,a.clientDeltaTime*a.correction,a.clientDeltaTime*a.correction),e.cameras.main.zoom=1,e.cameras.main.roundPixels=!0))}const c=r(t);for(let e=0;e<c.length;e++){const t=c[e],i=o(t),{body:s,clothes:r,shoes:a,hair:n}=i.sprites;$.log("spriteQuery Exit"),s&&(s.destroy(),r.destroy(),a.destroy(),n.destroy())}return t}))},te=()=>(0,q.Ur)((e=>{const t=window.acropolis.networkSystem.getNetworkEntities(),i=window.acropolis.networkSystem.getNetworkEntitiesIDsByLocalID(),s=window.acropolis.networkSystem.getLocalEntitiesIDsByNetworkID();for(const[r,a]of Object.entries(t))if(!(s?.[r]>=0&&(0,q.zw)(e,s[r]))){if("player"===a.type){const t=(0,q.Ce)(e),i=JSON.parse(JSON.stringify(a));window.acropolis.networkSystem.setLocalEntityByLocalId(t,i),window.acropolis.networkSystem.setLocalEntityIDbyNetworkID(r,t),window.acropolis.networkSystem.setNetworkEntityIDbyLocalID(r,t),(0,q.Tk)(e,G,t),(0,q.Tk)(e,J,t),(0,q.Tk)(e,Q,t),(0,q.Tk)(e,V,t),(0,q.Tk)(e,z,t),(0,q.Tk)(e,X,t),(0,q.Tk)(e,Y,t)}if("resource"===a.type){const t=(0,q.Ce)(e),i=JSON.parse(JSON.stringify(a));window.acropolis.networkSystem.setLocalEntityByLocalId(t,i),window.acropolis.networkSystem.setLocalEntityIDbyNetworkID(r,t),window.acropolis.networkSystem.setNetworkEntityIDbyLocalID(r,t),(0,q.Tk)(e,G,t),(0,q.Tk)(e,K,t)}}for(const[r,a]of Object.entries(i)){let i=!1;for(const[e]of Object.entries(t))a===e&&(i=!0);i||(0,q.Sx)(e,Number(r))}return e})),ie=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),se=(e,t=!1)=>{for(const[i]of Object.entries(e))"body"!==i&&"clothes"!==i&&"shoes"!==i&&"hair"!==i||(e[i].flipX=t)},re=(e,t)=>{const i=(0,q.kZ)([X,G]),s=e.input.activePointer,r=M(100);return(0,q.Ur)((e=>{r.timeCounter(window.acropolis.timeSystem.clientDeltaTimeNoFR);window.acropolis.timeSystem.clientDeltaTime;const a=i(e);for(let i=0;i<a.length;i++){const e=a[i],o=window.acropolis.networkSystem.getNetworkEntityByLocalId(e);if(!o||window?.acropolis?.inventory?.inventoryOpen)continue;G.x[e]=o.position.x,G.y[e]=o.position.y;const n=window.acropolis.networkSystem.getLocalEntityByLocalId(e);if(!n?.sprites?.body)continue;const l=ie(n.sprites.body,o.target);if("running"!==n.action&&l>1&&(n.action="running"),"idle"!==n.action&&l<1&&(n.action="idle"),n.sprites.body.x<o.target.x?se(n.sprites):se(n.sprites,!0),s.leftButtonDown()&&!s.leftButtonReleased()&&r.timer.isReady){if(r.trigger(),n.sprites.body.x<s.worldX?se(n.sprites):se(n.sprites,!0),s.y>550&&s.x>550)return;t.emit("playerTarget",{x:Math.round(s.worldX),y:Math.round(s.worldY)})}}return e}))},ae=()=>{window.acropolis.timeSystem={};const e=window.acropolis.timeSystem;return e.frameRate=1e3/60,e.clientDeltaTime=1,e.clientLastUpdate=Date.now(),e.clientLastDeltaTime=1,e.clientDeltaTimeNoFR=0,(0,q.Ur)((t=>{const i=Date.now();return e.clientDeltaTimeNoFR=i-e.clientLastUpdate,e.clientDeltaTime=(i-e.clientLastUpdate)/e.frameRate,e.clientLastUpdate=i,e.correction=e.clientDeltaTime/e.clientLastDeltaTime,e.clientLastDeltaTime=e.clientDeltaTime,t}))},oe=(e,t,i)=>{switch(window.acropolis.walking.stop(),window.acropolis.sword.stop(),window.acropolis.wood.stop(),window.acropolis.pickaxe.stop(),window.acropolis.fishing.stop(),window.acropolis.watering.stop(),window.acropolis.gathering.stop(),window.acropolis.shoveling.stop(),t){case"running":i.sprites.body.play({key:"running"}),i.sprites.shoes.play({key:"runningShoes"}),i.sprites.hair.play({key:"runningHair"}),i.sprites.clothes.play({key:"runningClothes"}),window.acropolis.walking.play();break;case"idle":i.sprites.body.play({key:"idle"}),i.sprites.shoes.play({key:"idleShoes"}),i.sprites.hair.play({key:"idleHair"}),i.sprites.clothes.play({key:"idleClothes"});break;case"attack":i.sprites.body.play({key:"attack"}),i.sprites.shoes.play({key:"attackShoes"}),i.sprites.hair.play({key:"attackHair"}),i.sprites.clothes.play({key:"attackClothes"}),window.acropolis.sword.play();break;case"mining":i.sprites.body.play({key:"mining"}),i.sprites.shoes.play({key:"miningShoes"}),i.sprites.hair.play({key:"miningHair"}),i.sprites.clothes.play({key:"miningClothes"}),window.acropolis.pickaxe.play();break;case"gathering":i.sprites.body.play({key:"gathering"}),i.sprites.shoes.play({key:"gatheringShoes"}),i.sprites.hair.play({key:"gatheringHair"}),i.sprites.clothes.play({key:"gatheringClothes"}),window.acropolis.gathering.play();break;case"chopping":i.sprites.body.play({key:"chopping"}),i.sprites.shoes.play({key:"choppingShoes"}),i.sprites.hair.play({key:"choppingHair"}),i.sprites.clothes.play({key:"choppingClothes"}),window.acropolis.wood.play();break;case"fishing":i.sprites.body.play({key:"fishing"}),i.sprites.shoes.play({key:"fishingShoes"}),i.sprites.hair.play({key:"fishingHair"}),i.sprites.clothes.play({key:"fishingClothes"}),window.acropolis.fishing.play();break;case"watering":i.sprites.body.play({key:"watering"}),i.sprites.shoes.play({key:"wateringShoes"}),i.sprites.hair.play({key:"wateringHair"}),i.sprites.clothes.play({key:"wateringClothes"}),window.acropolis.watering.play();break;case"shoveling":i.sprites.body.play({key:"shoveling"}),i.sprites.shoes.play({key:"shovelingShoes"}),i.sprites.hair.play({key:"shovelingHair"}),i.sprites.clothes.play({key:"shovelingClothes"}),window.acropolis.shoveling.play();break;default:break}};var ne=oe;const le=e=>{const t=[];return(0,q.Ur)((i=>{const s=window.acropolis.networkSystem.getNetworkEntities();for(const[r,a]of Object.entries(s))"player"===a.type&&t[r]!==a.action&&(t[r]=a.action,ne(e,a.action,window.acropolis.networkSystem.getLocalEntityByNetworkId(r)));return i}))};var ce=le,pe=i(15941);const me=e=>{const t=(0,q.kZ)([K]),i=(0,q.Ai)(t),s=(0,q.xE)(t),r=(window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId);return(0,q.Ur)((a=>{const o=i(a);for(let t=0;t<o.length;t++){const i=o[t],s=r(i);if(s.sprites={},"tree"===s.category&&(s.sprites.body=e.add.sprite(s.position.x,s.position.y-15,"trees"),s.sprites.body.setScale(2)),"herb"===s.category&&(s.sprites.body=e.add.sprite(s.position.x,s.position.y-5,"globalNature"),s.sprites.body.setFrame(60),s.sprites.body.setScale(2)),"stone"===s.category&&(s.sprites.body=e.add.sprite(s.position.x,s.position.y+5,"TXprops"),s.sprites.body.setFrame(245)),"sand"===s.category&&(s.sprites.body=e.add.sprite(s.position.x,s.position.y+5,"sand")),"animal"===s.category){s.sprites.body=e.add.sprite(s.position.x,s.position.y+5,"chicken"),s.sprites.body.setFrame(4);const t={key:"animatedChicken",frames:e.anims.generateFrameNumbers("chicken",{start:1,end:4}),frameRate:4,repeat:-1};e.anims.create(t),setTimeout((()=>{s.sprites.body.play({key:"animatedChicken"})}),1e3)}if("crop"===s.category){s.sprites.body=e.add.sprite(s.position.x,s.position.y+5,"crops"),s.sprites.body.setFrame(4);const t={key:"animatedCrop",frames:e.anims.generateFrameNumbers("crops",{start:1,end:5}),frameRate:.1,repeat:-1};e.anims.create(t),setTimeout((()=>{s.sprites.body.play({key:"animatedCrop"})}),1e3)}}const n=t(a);for(let e=0;e<n.length;e++){const t=n[e],i=r(t),{body:s}=i.sprites;s&&("tree"===i.category&&(s.x=i.position.x,s.y=i.position.y-15),"herb"===i.category&&(s.x=i.position.x,s.y=i.position.y))}const l=s(a);for(let e=0;e<l.length;e++){const t=l[e],i=r(t),{body:s,clothes:a,shoes:o}=i.sprites;pe.log("resourceQuery Exit"),s&&s.destroy()}return a}))},ye=e=>{const t=(0,q.kZ)([J]),i=(0,q.Ai)(t),s=(0,q.xE)(t),r=(window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId);return(0,q.Ur)((a=>{const o=i(a);for(let t=0;t<o.length;t++){const i=o[t],s=r(i);s.sprites.healthBarDecoration=e.add.sprite(50,15,"healthBarDecoration"),s.sprites.healthBarDecoration.setScrollFactor(0,0),s.sprites.healthBar=e.add.sprite(57,15,"healthBar"),s.sprites.healthBar.setScrollFactor(0,0)}const n=t(a);for(let e=0;e<n.length;e++){const t=n[e],i=r(t),s=window.acropolis.networkSystem.getNetworkEntityByLocalId(t);if(s.healthPoints<100){i.healthPoints>s.healthPoints&&(window.acropolis.hurt.isPlaying||(window.acropolis.hurt.stop(),window.acropolis.hurt.play(),window.acropolis.body.stop(),window.acropolis.body.play()));const e=s.healthPoints/100;i.healthPoints=s.healthPoints,i.sprites.healthBar.setCrop(0,0,50*e,10)}}const l=s(a);for(let e=0;e<l.length;e++){const t=l[e],i=r(t),{healthBar:s,healthBarDecoration:a}=i.sprites;s&&(s.destroy(),a.destroy())}return a}))},de=e=>{const t=(0,q.kZ)([J]);(0,q.Ai)(t),(0,q.xE)(t),window.acropolis.timeSystem,window.acropolis.networkSystem.getLocalEntityByLocalId;let i=!1,s=288,r=416,a=1;const o=[];let n,l,c=288,p=416,m=1;const y=()=>{for(let e=0;e<4;e++){c=288;for(let e=0;e<8;e++)o.push({id:m,position:{x:c,y:p},itemId:""}),c+=32,m++;p+=32}},d=(t,i)=>{i.sprites.items[t].sprite.setInteractive(),i.sprites.items[t].sprite.setData({id:t}),i.sprites.items[t].sprite.setScrollFactor(0,0),i.sprites.items[t].qty.setData({id:t}),i.sprites.items[t].qty.setInteractive({draggable:!0,hitArea:new Phaser.Geom.Rectangle(-16,-16,32,32),hitAreaCallback:function(e,t,i){return Phaser.Geom.Rectangle.Contains(e,t,i)}}),i.sprites.items[t].qty.setScrollFactor(0,0),e.input.setDraggable(i.sprites.items[t].sprite)},h=()=>{s+=32,a++,a>8&&(r+=32,s=288)},g=(e,t)=>{o.forEach((i=>{i.position.x===t.sprite.x&&i.position.y===t.sprite.y&&(i.itemId=e)}))},u=(e,t)=>{switch(e){case"basicWood":t.sprites.items[e].sprite.setFrame(958);break;case"basicStone":t.sprites.items[e].sprite.setFrame(859);break;case"basicHerb":t.sprites.items[e].sprite.setFrame(288);break;case"basicLeather":t.sprites.items[e].sprite.setFrame(876);break;case"basicCrop":t.sprites.items[e].sprite.setFrame(310);break;case"basicSand":t.sprites.items[e].sprite.setFrame(949);break;default:break}},w=()=>{e.input.on("drag",(function(e,t,i,s){i>=288&&i<=512&&s>=416&&s<=512&&(t.x=Phaser.Math.Snap.To(i,32),t.y=Phaser.Math.Snap.To(s,32),o.forEach((e=>{if(e.position.y===t.y&&e.position.x===t.x&&e.itemId){const i=o.find((e=>e.itemId===t.getData("id")));if(i){const t=i.itemId,s=n.sprites.items[e.itemId];s.sprite.x=i.position.x,s.sprite.y=i.position.y,s.qty.x=i.position.x,s.qty.y=i.position.y,i.itemId=e.itemId,e.itemId=t}}else if(e.position.y===t.y&&e.position.x===t.x){const i=o.find((e=>e.itemId===t.getData("id")));e.itemId=t.getData("id"),i.itemId=""}})))}))},f=t=>{t.sprites.inventory=e.add.sprite(400,370,"inventory"),t.sprites.backpack=e.add.sprite(575,575,"backpack"),e.input.topOnly=!1,t.sprites.backpack.setScrollFactor(0,0),t.sprites.backpack.setInteractive(),window.acropolis.inventory={},window.acropolis.inventory.inventoryOpen=!0,t.sprites.inventory.setScrollFactor(0,0),t.sprites.inventory.setInteractive(),t.sprites.inventory.setScale(2),t.sprites.backpack.setName("backpack")},k=()=>{e.input.on("pointerdown",((e,t)=>{if("backpack"===t?.[0]?.name){if(window.acropolis.inventory.inventoryOpen=!window.acropolis.inventory.inventoryOpen,n?.sprites?.items)for(const[,e]of Object.entries(n.sprites.items))e.sprite.setVisible(!e.sprite.visible),e.qty.setVisible(!e.qty.visible);n.sprites.inventory.setVisible(!n.sprites.inventory.visible)}}))};return(0,q.Ur)((t=>{if(window?.acropolis?.currentPlayerId){if(n=window.acropolis.networkSystem.getLocalEntityByNetworkId(window.acropolis.currentPlayerId),l=window.acropolis.networkSystem.getNetworkEntityByNetworkID(window.acropolis.currentPlayerId),null===n?.items&&(n.items=l.items),i&&l?.items&&n?.items)for(const[t,i]of Object.entries(l.items)){if(n.sprites.items[t]){n.sprites.items[t].qty.setText(i.quantity);continue}const a={sprite:e.add.sprite(s,r,"icons"),qty:e.add.text(s,r,i.quantity)};n.sprites.items[t]=a;const o=window.acropolis.inventory.inventoryOpen;a.sprite.setVisible(o),a.qty.setVisible(o),g(t,a),u(t,n),d(t,n),h()}if(!i&&n?.sprites){if(i=!0,f(n),y(),n.sprites.items={},l?.items&&n?.items)for(const[t,i]of Object.entries(l.items)){if(n.sprites.items[t])continue;const a={sprite:e.add.sprite(s,r,"icons"),qty:e.add.text(s,r,i.quantity)};n.sprites.items[t]=a,g(t,a),u(t,n),d(t,n),h()}return w(),k(),t}}}))};var he=i(15941);const ge=e=>(0,q.Ur)((t=>{const i=window.acropolis.networkSystem.getNetworkEntities();for(const[s,r]of Object.entries(i)){const t=window.acropolis.networkSystem.getLocalEntityByNetworkId(s);r?.skillPosition?t?.skill||(he.log("crea el puto skill"),t.skill={},t.sprites.skill=e.add.sprite(r.skillPosition.x,r.skillPosition.y,"balla")):t?.skill&&(he.log("destroye el puto skill"),t.sprites.skill.destroy(),t.skill=null)}return t}));var ue=i(15941);class we extends x().Scene{init(e){this.lobbyScene={},this.lobbyScene.socket=e.socket}preload(){R(this),T(this,"ball","/game/sprites/spikedballa.png"),T(this,"atlas","/game/tiled/atlas.png"),L(this,"forestkey","/game/tiled/forest1.json"),E(this,"bodySpriteSheet","/game/character/characters/char_all.png",H),E(this,"shoesSpriteSheet","/game/character/clothes/shoes.png",H),E(this,"gentlemanHairSpriteSheet","/game/character/hair/gentleman.png",H),E(this,"clothesSpriteSheet","/game/character/clothes/basic.png",H),E(this,"balla","/game/sprites/spikedballa.png",O),E(this,"trees","/game/nature/global.png",H),E(this,"globalNature","/game/nature/global.png",P),E(this,"sand","/game/nature/sandy3.png",H),E(this,"crops","/game/fullversion/farming/crops.png",P),E(this,"chicken","/game/fullversion/animals/chicken_animation.png",P),E(this,"TXprops","/game/rpg-pack/Texture/TXProps.png",H),E(this,"healthBarDecoration","/game/statusbar/health_bar_decoration.png",{frameWidth:64,frameHeight:17}),E(this,"healthBar","/game/statusbar/health_bar.png",{frameWidth:49,frameHeight:17}),E(this,"backpack","/game/rpg-pack/UI/backpack.png",H),E(this,"inventory","/game/rpg-pack/UI/inventory.png",{frameWidth:192,frameHeight:192}),E(this,"icons","/game/icons/icons_full_32.png",H),B(this,"playerStep","/game/sound/grassfootstep.mp3",{instances:1}),B(this,"playerSword","/game/sound/sword1hit.mp3",{instances:1}),B(this,"playerWood","/game/sound/chopppingwood1hit.mp3",{instances:1}),B(this,"playerPickaxe","/game/sound/pickaxe1hit.mp3",{instances:1}),B(this,"playerFishing","/game/sound/fishing1hit.mp3",{instances:1}),B(this,"playerWatering","/game/sound/watering1hit.mp3",{instances:1}),B(this,"playerGathering","/game/sound/bush1hit.mp3",{instances:1}),B(this,"playerShoveling","/game/sound/shoveling1hit.mp3",{instances:1}),B(this,"playerHurt","/game/sound/damage1hit.mp3",{instances:1}),B(this,"playerBody","/game/sound/body1hit.mp3",{instances:1}),B(this,"music","/game/music/tavernaloop.mp3",{instances:1})}create(){window.acropolis.walking=this.sound.add("playerStep",{mute:!1,volume:.3,rate:2.3,detune:-.5,seek:0,loop:!0,delay:0}),window.acropolis.sword=this.sound.add("playerSword",{mute:!1,volume:.2,rate:2,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.wood=this.sound.add("playerWood",{mute:!1,volume:.4,rate:1,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.pickaxe=this.sound.add("playerPickaxe",{mute:!1,volume:.8,rate:.8,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.fishing=this.sound.add("playerFishing",{mute:!1,volume:1,rate:.6,detune:0,seek:0,loop:!1,delay:0}),window.acropolis.watering=this.sound.add("playerWatering",{mute:!1,volume:1,rate:.6,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.gathering=this.sound.add("playerGathering",{mute:!1,volume:1,rate:.6,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.shoveling=this.sound.add("playerShoveling",{mute:!1,volume:1,rate:.7,detune:0,seek:0,loop:!0,delay:0}),window.acropolis.hurt=this.sound.add("playerHurt",{mute:!1,volume:.3,rate:.7,detune:0,seek:0,loop:!1,delay:0}),window.acropolis.body=this.sound.add("playerBody",{mute:!1,volume:.3,rate:.7,detune:0,seek:0,loop:!1,delay:0}),window.acropolis.music=this.sound.add("music",{mute:!1,volume:.4,rate:1,detune:0,seek:0,loop:!0,delay:0}),setTimeout((()=>{ue.log("empieza la musica"),window.acropolis.music.play()}),3e3),this.world=(0,q.hW)(),this.timeSystem=ae(),this.entitySystem=te(),this.itemsSystem=de(this),this.gameControllerSystem=U(this,this.lobbyScene.socket),this.spriteSystem=ee(this,["bodySpriteSheet","clothesSpriteSheet","shoesSpriteSheet"]),this.skillsSystem=ge(this),this.healthBarSystem=ye(this),this.animationSystem=ce(this),this.targetMovementSystem=re(this,this.lobbyScene.socket),this.resourceSpriteSystem=me(this);const e=this.make.tilemap({key:"forestkey",tileWidth:16,tileHeight:16}),t=e.addTilesetImage("atlas","atlas");e.createLayer("piso",t,0,0),e.createLayer("caminos",t,0,0),e.createLayer("plantas",t,0,0),e.createLayer("construcciones",t,0,0),Z(this),this.cameras.main.setBounds(0,0,1e3,1e3),this.input.mouse.disableContextMenu(),setInterval((()=>{this.world&&this.spriteSystem&&this.entitySystem&&this.targetMovementSystem&&this.timeSystem&&(this.itemsSystem(this.world),this.timeSystem(this.world),this.entitySystem(this.world),this.spriteSystem(this.world),this.healthBarSystem(this.world),this.resourceSpriteSystem(this.world),this.skillsSystem(this.world),this.targetMovementSystem(this.world),this.gameControllerSystem(this.world),this.animationSystem(this.world))}),window.acropolis.timeSystem.frameRate)}}var fe=i(68993),ke=i(35085),Se=i.n(ke),be=i(77067),ve=i.n(be);const xe=e=>{const t={},i={},s={};let r={};e.on("broadcastNetworkClient",(e=>{r=e}));const a=e=>{delete t[e]},o=e=>{delete i[e]},n=e=>{delete s[e]},l=(e,t)=>{i[e]=t},c=e=>r[e],p=e=>i[e],m=()=>t,y=()=>i,d=(e,t)=>{s[e]=t},h=e=>{const t=s[e];return t},g=e=>{const t=s[p(e)];return t},u=()=>r,w=()=>s,f=(e,i)=>{t[i]=e},k=e=>t[e],S=e=>{const t=r[k(e)];return t};return{deleteNetworkEntityIDByLocalID:a,deleteLocalEntityIDByNetworkID:o,deleteLocalEntity:n,getLocalEntitiesIDsByNetworkID:y,getNetworkEntitiesIDsByLocalID:m,getNetworkEntities:u,getNetworkEntityByLocalId:S,getNetworkEntityByNetworkID:c,getLocalEntities:w,getLocalEntityByLocalId:h,getLocalEntityByNetworkId:g,setLocalEntityByLocalId:d,setNetworkEntityIDbyLocalID:f,getNetworkEntityIDbyLocalID:k,getLocalEntityIDbyNetworkID:p,setLocalEntityIDbyNetworkID:l}};var Ie=i(15941);let Ne;Ie.log("el prod "),Ne=(0,fe.ZP)(window.location.origin,{path:"/gameSocket"});var Re=(0,r.aZ)({name:"AcropolisMain",data(){return{isLoggedIn:!1,loginText:"Click here to Login!"}},methods:{initGame(){const e=async()=>{await Ne.once("connect",(()=>{Ne.emit("register",(e=>{Ie.log("socketId",e)}))}));const e=new(Se())(window.ethereum);await window.ethereum.request({method:"eth_requestAccounts"});const t=(await e.eth.getAccounts())[0],i=await ve().sign((i=>e.eth.personal.sign(i,t)),"1d");Ie.log(i),Ne.emit("login",i)};e()}},mounted(){Ne.on("loggedIn",(e=>{const{isLoggedIn:t,entityId:i}=e;Ie.log("logeeasdfa",t),t?(window.acropolis={},window.acropolis.networkSystem=xe(Ne),window.acropolis.currentPlayerId=i,window.acropolis.socket=Ne,this.isLoggedIn=t,setTimeout((()=>{const e={type:x().AUTO,scale:{parent:"phaser-example",mode:x().Scale.FIT,width:600,height:600}},t=new(x().Game)(e);t.scene.add("acropolisGame",we),t.scene.start("acropolisGame",{socket:Ne})}),3e3)):this.loginText="Account already logged in!"}))}});const De=(0,o.Z)(Re,[["render",b]]);var Fe=De;let Te=class extends h.w3{};Te=(0,d.gn)([(0,h.Ei)({components:{AcropolisMain:Fe}})],Te);var Le=Te;const Ee=(0,o.Z)(Le,[["render",y]]);var Be=Ee;const Ce=[{path:"/",name:"Home",component:Be}],He=(0,p.p7)({history:(0,p.r5)(),routes:Ce});var Oe=He;(0,s.ri)(c).use(Oe).mount("#app")},88677:function(){},62808:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},27790:function(){},52361:function(){},94616:function(){},6567:function(){},55896:function(){},87500:function(){}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,s,r,a){if(!s){var o=1/0;for(p=0;p<e.length;p++){s=e[p][0],r=e[p][1],a=e[p][2];for(var n=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(n=!1,a<o&&(o=a));if(n){e.splice(p--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[s,r,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,a,o=s[0],n=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in n)i.o(n,r)&&(i.m[r]=n[r]);if(l)var p=l(i)}for(t&&t(s);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(p)},s=self["webpackChunkacropolis"]=self["webpackChunkacropolis"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(20517)}));s=i.O(s)})();
//# sourceMappingURL=app.7fc0ef0f.js.map