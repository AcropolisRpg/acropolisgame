(function(e){function t(t){for(var i,l,s=t[0],o=t[1],d=t[2],c=0,p=[];c<s.length;c++)l=s[c],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},r={app:0},n=[];function l(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"542b58eb"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=r[e]=[t,i]}));t.push(a[2]=i);var n,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=l(e);var d=new Error;n=function(t){o.onerror=o.onload=null,clearTimeout(c);var a=r[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",d.name="ChunkLoadError",d.type=i,d.request=n,a[1](d)}r[e]=void 0}};var c=setTimeout((function(){n({type:"timeout",target:o})}),12e4);o.onerror=o.onload=n,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/game/",s.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("7a23");function r(e,t){var a=Object(i["u"])("router-view");return Object(i["o"])(),Object(i["c"])("div",null,[Object(i["f"])(a)])}a("e414");var n=a("6b0d"),l=a.n(n);const s={},o=l()(s,[["render",r]]);var d=o,c=(a("d3b7"),a("3ca3"),a("ddb0"),a("6c02")),u={class:"home"};function p(e,t,a,r,n,l){var s=Object(i["u"])("Acropolis");return Object(i["o"])(),Object(i["c"])("div",u,[Object(i["f"])(s)])}var y=function(e){return Object(i["r"])("data-v-de822686"),e=e(),Object(i["p"])(),e},h={key:0},f=y((function(){return Object(i["d"])("h3",{style:{color:"#fff","text-align":"center",padding:"5px","max-width":"200px",margin:"0 auto"}},"Welcome to Acropolis MMORPG Beta Testing! ",-1)})),m={key:1},v=Object(i["e"])('<div style="text-align:center;margin:25px auto;" data-v-de822686><h3 style="color:#fff;" data-v-de822686>Acropolis Playgrounds BETA Development!</h3><div id="phaser-example" style="border-radius:100px;" data-v-de822686></div><h3 style="color:#fff;" data-v-de822686>Click anywhere to move around or press &quot;Q&quot; key for skills.</h3><a href="https://www.acropolisrpg.com/" style="color:#fff;" data-v-de822686>Go to Acropolist home page</a></div><p style="color:#fff;text-align:center;" data-v-de822686> The first time you login you will receive a reward of 100 $ACR, be wise because that&#39;s the only currency that will be used inside and outside the game. </p><h3 style="color:#fff;text-align:center;" data-v-de822686>If you can&#39;t see the game screen refresh and login again!</h3><p style="color:#fff;text-align:center;" data-v-de822686> Server stats. <span id="online" data-v-de822686>0</span> users online. <span id="fps" data-v-de822686>0</span> server fps. <span id="worldX" data-v-de822686>0</span> server fps. <span id="worldY" data-v-de822686>0</span> server fps. </p>',4),g=[v];function P(e,t,a,r,n,l){return Object(i["o"])(),Object(i["c"])("div",null,[n.isLoggedIn?(Object(i["o"])(),Object(i["c"])("div",m,g)):(Object(i["o"])(),Object(i["c"])("div",h,[f,Object(i["d"])("p",{style:{color:"#fff","text-align":"center",border:"1px solid white",padding:"5px","max-width":"200px",margin:"0 auto"},onClick:t[0]||(t[0]=function(){return l.initGame&&l.initGame.apply(l,arguments)})}," Click here to Login!")]))])}var b=a("c7eb"),k=a("1da1"),w=a("d4ef"),x=a.n(w),O=a("3835"),j=a("d4ec"),I=a("bee2"),T=a("262e"),D=a("2caf"),C=(a("159b"),a("4fad"),function(e){var t=Date.now(),a=function(){var a=e-(Date.now()-t);return a<0&&(a=e,t=Date.now()),a};return{remainigTime:a}}),A=C;function K(e,t,a){return(1-a)*e+a*t}function M(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var L="",S=function(e){Object(T["a"])(a,e);var t=Object(D["a"])(a);function a(){return Object(j["a"])(this,a),t.apply(this,arguments)}return Object(I["a"])(a,[{key:"init",value:function(e){L=e.socket}},{key:"preload",value:function(){this.load.image("ball","/game/game/sprites/spikedballa.png"),this.load.image("atlas","/game/game/tiled/atlas.png"),this.load.tilemapTiledJSON("forestkey","/game/game/tiled/forest1.json"),this.load.spritesheet("playerSprite","/game/game/rpg-pack/chars/gabe/gabe-idle-run.png",{frameWidth:24,frameHeight:24}),this.load.spritesheet("balla","/game/game/sprites/spikedballa.png",{frameWidth:96,frameHeight:96}),this.allPlayers=[],this.gameTime=Date.now(),this.followingPlayer=!1}},{key:"create",value:function(){var e=this,t=this.make.tilemap({key:"forestkey",tileWidth:16,tileHeight:16}),a=t.addTilesetImage("atlas","atlas");t.createLayer("piso",a,0,0),t.createLayer("caminos",a,0,0),t.createLayer("plantas",a,0,0),t.createLayer("construcciones",a,0,0),this.clientLastUpdate=Date.now(),this.clientLastDelta=Date.now(),this.playerAnimations="idle";var i={key:"running",frames:this.anims.generateFrameNumbers("playerSprite"),frameRate:15,repeat:-1};this.anims.create(i);var r={key:"idle",frames:this.anims.generateFrameNumbers("playerSprite",{frames:[0]}),frameRate:15,repeat:-1};this.anims.create(r),this.cameras.main.setBounds(0,0,1e4,1e4),this.pointerado=this.input.activePointer,this.instance1=A(5e3),this.instance2=A(1e3),this.instance3=A(100),this.lastUpdate=Date.now(),this.dt=0,this.headPosition=new x.a.Geom.Point(100,100),this.input.mouse.disableContextMenu(),this.input.on("pointerup",(function(t){if(t.leftButtonReleased()){var a,i,r,n,l;e.allPlayers[e.currentPlayerId].sprite&&"running"!==(null===(a=e.allPlayers)||void 0===a||null===(i=a[e.currentPlayerId])||void 0===i||null===(r=i.sprite)||void 0===r||null===(n=r.anims)||void 0===n||null===(l=n.currentAnim)||void 0===l?void 0:l.key)&&(e.allPlayers[e.currentPlayerId].sprite.play({key:"running"}),e.allPlayers[e.currentPlayerId].sprite.x<e.pointerado.worldX?e.allPlayers[e.currentPlayerId].sprite.flipX=!1:e.allPlayers[e.currentPlayerId].sprite.flipX=!0);var s={x:Math.round(t.worldX),y:Math.round(t.worldY)};e.allPlayers[e.currentPlayerId].target=s,L.emit("player click",s)}})),this.input.on("pointerdown",(function(t){if(t.leftButtonReleased()){var a={x:t.worldX,y:t.worldY};e.allPlayers[e.currentPlayerId].target=a}})),this.playerInputClient={},this.playerInputClient.keyQ=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.Q),this.playerInputClient.keyW=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.W),this.playerInputClient.keyE=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.E),this.playerInputClient.keyR=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.R),this.playerInputClient.keyD=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.D),this.playerInputClient.keyF=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.F),L.on("update state",(function(t){var a=t.players,i=Date.now();e.dt=(i-e.lastUpdate)/(1e3/30),e.lastUpdate=i,a.forEach((function(t){var a,i,r,n,l,s,o,d,c,u,p,y,h,f,m,v,g,P,b,k,w,x,O;(null!==(a=e.allPlayers)&&void 0!==a&&a[t.id]||(e.allPlayers[t.id]={sprite:e.add.sprite(t.position.x,t.position.y,"playerSprite"),playerId:t.id,transform:{x:t.position.x,y:t.position.y},target:{x:t.position.x,y:t.position.y},skills:null}),null===(i=t.skills)||void 0===i||!i.y||null===(r=t.skills)||void 0===r||!r.x||null!==(n=e.allPlayers)&&void 0!==n&&n[t.id].skills?null===t.skills&&null!==(l=e.allPlayers)&&void 0!==l&&l[t.id].skills&&(e.allPlayers[t.id].skills.destroy(),e.allPlayers[t.id].skills=null):e.allPlayers[t.id].skills=e.add.sprite(t.skills.x,t.skills.y,"ball"),e.instance1.remainigTime(),isNaN(e.dt))||(null!==(s=e.allPlayers)&&void 0!==s&&null!==(o=s[t.id])&&void 0!==o&&null!==(d=o.skills)&&void 0!==d&&d.x&&null!==(c=e.allPlayers)&&void 0!==c&&null!==(u=c[t.id])&&void 0!==u&&null!==(p=u.skills)&&void 0!==p&&p.y&&null!==(y=t.skills)&&void 0!==y&&y.x&&null!==(h=t.skills)&&void 0!==h&&h.y&&(e.allPlayers[t.id].skills.x=Math.round(K(e.allPlayers[t.id].skills.x,t.skills.x,e.dt)),e.allPlayers[t.id].skills.y=Math.round(K(e.allPlayers[t.id].skills.y,t.skills.y,e.dt))),e.allPlayers[t.id].sprite.x===1/0&&(e.allPlayers[t.id].sprite.x=0),e.allPlayers[t.id].sprite.y===1/0&&(e.allPlayers[t.id].sprite.y=0),e.allPlayers[t.id].transform.x=Math.round(K(e.allPlayers[t.id].sprite.x,t.position.x,e.dt)),e.allPlayers[t.id].transform.y=Math.round(K(e.allPlayers[t.id].sprite.y,t.position.y,e.dt)),e.allPlayers[t.id].target=t.target,"running"!==(null===(f=e.allPlayers)||void 0===f||null===(m=f[t.id])||void 0===m||null===(v=m.sprite)||void 0===v||null===(g=v.anims)||void 0===g||null===(P=g.currentAnim)||void 0===P?void 0:P.key)&&M(e.allPlayers[t.id].sprite,t.target)>20&&e.allPlayers[t.id].sprite.play({key:"running"}),"idle"!==(null===(b=e.allPlayers)||void 0===b||null===(k=b[t.id])||void 0===k||null===(w=k.sprite)||void 0===w||null===(x=w.anims)||void 0===x||null===(O=x.currentAnim)||void 0===O?void 0:O.key)&&M(e.allPlayers[t.id].sprite,t.target)<10&&e.allPlayers[t.id].sprite.play({key:"idle"}),e.allPlayers[t.id].sprite&&(e.allPlayers[t.id].sprite.x<t.target.x?e.allPlayers[t.id].sprite.flipX=!1:e.allPlayers[t.id].sprite.flipX=!0),e.instance1.remainigTime())}));for(var r=function(){var t=Object(O["a"])(l[n],2),i=t[0],r=t[1],s=!1;a.forEach((function(e){i===e.id&&(s=!0)})),s||(r.sprite.destroy(),delete e.allPlayers[i])},n=0,l=Object.entries(e.allPlayers);n<l.length;n++)r()}))}},{key:"update",value:function(){this.input.keyboard.checkDown(this.playerInputClient.keyQ,1e3)&&L.emit("player q");var e=Date.now();this.clientDeltaTime=(e-this.clientLastUpdate)/(1e3/60),this.clientLastUpdate=e,this.correction=this.clientDeltaTime/this.clientLastDeltaTime,this.clientLastDeltaTime=this.clientDeltaTime;for(var t=0,a=Object.entries(this.allPlayers);t<a.length;t++){var i,r,n,l,s,o=Object(O["a"])(a[t],1),d=o[0];if(L.id&&this.allPlayers[L.id].sprite&&(this.currentPlayerId=L.id,this.allPlayers[this.currentPlayerId]&&!this.followingPlayer&&(this.followingPlayer=!0,this.cameras.main&&(this.cameras.main.zoom=2,this.cameras.main.startFollow(this.allPlayers[this.currentPlayerId].sprite,!1,this.clientDeltaTime*this.correction,this.clientDeltaTime*this.correction)))),!isNaN(this.clientDeltaTime))this.allPlayers[d].sprite.x===1/0&&(this.allPlayers[d].sprite.x=0),this.allPlayers[d].sprite.y===1/0&&(this.allPlayers[d].sprite.y=0),M(this.allPlayers[d].sprite,this.allPlayers[d].target)>20&&(this.allPlayers[d].sprite.x=K(this.allPlayers[d].sprite.x,this.allPlayers[d].transform.x,this.clientDeltaTime),this.allPlayers[d].sprite.y=K(this.allPlayers[d].sprite.y,this.allPlayers[d].transform.y,this.clientDeltaTime)),this.instance3.remainigTime(),"running"===(null===(i=this.allPlayers)||void 0===i||null===(r=i[this.currentPlayerId])||void 0===r||null===(n=r.sprite)||void 0===n||null===(l=n.anims)||void 0===l||null===(s=l.currentAnim)||void 0===s?void 0:s.key)&&M(this.allPlayers[this.currentPlayerId].sprite,this.allPlayers[this.currentPlayerId].target)<20&&this.allPlayers[this.currentPlayerId].sprite.play({key:"idle"})}this.pointerado.leftButtonDown()&&!this.pointerado.leftButtonReleased()&&this.instance3.remainigTime()>=100&&(this.allPlayers[this.currentPlayerId].sprite&&(this.allPlayers[this.currentPlayerId].sprite.x<this.pointerado.worldX?this.allPlayers[this.currentPlayerId].sprite.flipX=!1:this.allPlayers[this.currentPlayerId].sprite.flipX=!0),L.emit("player click",{x:Math.round(this.pointerado.worldX),y:Math.round(this.pointerado.worldY)}))}}]),a}(x.a.Scene),X=a("99e5"),R=a.n(X),_=a("1adc"),E=a.n(_),q=a("daa8"),B=Object(q["a"])(window.location.origin,{path:"/gameSocket"}),G={name:"Acropolis",data:function(){return{isLoggedIn:!1}},methods:{initGame:function(){var e=function(){var e=Object(k["a"])(Object(b["a"])().mark((function e(){var t,a,i;return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.once("connect",(function(){B.emit("register",(function(e){console.log("uan chingada",e)}))}));case 2:return t=new R.a(window.ethereum),e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return e.next=7,t.eth.getAccounts();case 7:return a=e.sent[0],e.next=10,E.a.sign((function(e){return t.eth.personal.sign(e,a)}),"1d");case 10:i=e.sent,console.log(i),B.emit("login",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},mounted:function(){var e=this;B.on("loggedIn",(function(t){console.log("leand",t),e.isLoggedIn=t,setTimeout((function(){var e={renderType:3,type:x.a.AUTO,parent:"phaser-example",scale:{parent:"phaser-example",mode:x.a.Scale.FIT,width:600,height:600},fps:60},t=new x.a.Game(e);t.scene.add("game",S),t.scene.start("game",{socket:B})}),2e3)}))}};a("e85c");const N=l()(G,[["render",P],["__scopeId","data-v-de822686"]]);var U=N,F={name:"Home",components:{Acropolis:U}};const W=l()(F,[["render",p]]);var H=W,Q=[{path:"/",name:"Home",component:H},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],Y=Object(c["a"])({history:Object(c["b"])(),routes:Q}),J=Y;Object(i["b"])(d).use(J).mount("#app")},6:function(e,t){},"6e5d":function(e,t,a){},7:function(e,t){},8:function(e,t){},"8dd3":function(e,t,a){},9:function(e,t){},e414:function(e,t,a){"use strict";a("8dd3")},e85c:function(e,t,a){"use strict";a("6e5d")}});
//# sourceMappingURL=app.40178c6a.js.map