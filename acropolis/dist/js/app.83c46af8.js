(function(e){function t(t){for(var a,l,s=t[0],o=t[1],d=t[2],u=0,p=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(p.length)p.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,l=1;l<i.length;l++){var o=i[l];0!==r[o]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=i[0]))}return e}var a={},r={app:0},n=[];function l(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"542b58eb"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],i=r[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,a){i=r[e]=[t,a]}));t.push(i[2]=a);var n,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=l(e);var d=new Error;n=function(t){o.onerror=o.onload=null,clearTimeout(u);var i=r[e];if(0!==i){if(i){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,i[1](d)}r[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:o})}),12e4);o.onerror=o.onload=n,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/game/",s.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=d;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4c5b":function(e,t,i){"use strict";i("509e")},5:function(e,t){},"509e":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("7a23");function r(e,t){var i=Object(a["u"])("router-view");return Object(a["o"])(),Object(a["c"])("div",null,[Object(a["f"])(i)])}i("e414");var n=i("6b0d"),l=i.n(n);const s={},o=l()(s,[["render",r]]);var d=o,u=(i("d3b7"),i("3ca3"),i("ddb0"),i("6c02")),c={class:"home"};function p(e,t,i,r,n,l){var s=Object(a["u"])("Acropolis");return Object(a["o"])(),Object(a["c"])("div",c,[Object(a["f"])(s)])}var y=function(e){return Object(a["r"])("data-v-d76937e4"),e=e(),Object(a["p"])(),e},h={key:0},f=y((function(){return Object(a["d"])("h3",{style:{color:"#fff","text-align":"center",padding:"5px","max-width":"200px",margin:"0 auto"}},"Welcome to Acropolis MMORPG Beta Testing! ",-1)})),m={key:1},v=Object(a["e"])('<div style="text-align:center;margin:25px auto;" data-v-d76937e4><h3 style="color:#fff;" data-v-d76937e4>Acropolis Playgrounds BETA Development!</h3><div id="phaser-example" style="border-radius:100px;" data-v-d76937e4></div><h3 style="color:#fff;" data-v-d76937e4>Click anywhere to move around or press &quot;Q&quot; key for skills.</h3><a href="https://www.acropolisrpg.com/" style="color:#fff;" data-v-d76937e4>Go to Acropolist home page</a></div><p style="color:#fff;text-align:center;" data-v-d76937e4> The first time you login you will receive a reward of 100 $ACR, be wise because that&#39;s the only currency that will be used inside and outside the game. </p><h3 style="color:#fff;text-align:center;" data-v-d76937e4>If you can&#39;t see the game screen refresh and login again!</h3><p style="color:#fff;text-align:center;" data-v-d76937e4> Server stats. <span id="online" data-v-d76937e4>0</span> users online. <span id="fps" data-v-d76937e4>0</span> server fps. <span id="worldX" data-v-d76937e4>0</span> server fps. <span id="worldY" data-v-d76937e4>0</span> server fps. </p>',4),g=[v];function P(e,t,i,r,n,l){return Object(a["o"])(),Object(a["c"])("div",null,[n.isLoggedIn?(Object(a["o"])(),Object(a["c"])("div",m,g)):(Object(a["o"])(),Object(a["c"])("div",h,[f,Object(a["d"])("p",{style:{color:"#fff","text-align":"center",border:"1px solid white",padding:"5px","max-width":"200px",margin:"0 auto"},onClick:t[0]||(t[0]=function(){return l.initGame&&l.initGame.apply(l,arguments)})}," Click here to Login!")]))])}var b=i("c7eb"),k=i("1da1"),w=i("d4ef"),x=i.n(w),O=i("3835"),j=i("d4ec"),I=i("bee2"),T=i("262e"),D=i("2caf"),C=(i("159b"),i("4fad"),function(e){var t=Date.now(),i=function(){var i=e-(Date.now()-t);return i<0&&(i=e,t=Date.now()),i};return{remainigTime:i}}),A=C;function K(e,t,i){return(1-i)*e+i*t}function M(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var L="",S=function(e){Object(T["a"])(i,e);var t=Object(D["a"])(i);function i(){return Object(j["a"])(this,i),t.apply(this,arguments)}return Object(I["a"])(i,[{key:"init",value:function(e){L=e.socket}},{key:"preload",value:function(){this.load.image("ball","/game/game/sprites/spikedballa.png"),this.load.image("atlas","/game/game/tiled/atlas.png"),this.load.tilemapTiledJSON("forestkey","/game/game/tiled/forest1.json"),this.load.spritesheet("playerSprite","/game/game/rpg-pack/chars/gabe/gabe-idle-run.png",{frameWidth:24,frameHeight:24}),this.load.spritesheet("balla","/game/game/sprites/spikedballa.png",{frameWidth:96,frameHeight:96}),this.allPlayers=[],this.gameTime=Date.now(),this.followingPlayer=!1}},{key:"create",value:function(){var e=this,t=this.make.tilemap({key:"forestkey",tileWidth:16,tileHeight:16}),i=t.addTilesetImage("atlas","atlas");t.createLayer("piso",i,0,0),t.createLayer("caminos",i,0,0),t.createLayer("plantas",i,0,0),t.createLayer("construcciones",i,0,0),this.clientLastUpdate=Date.now(),this.clientLastDelta=Date.now(),this.playerAnimations="idle";var a={key:"running",frames:this.anims.generateFrameNumbers("playerSprite"),frameRate:15,repeat:-1};this.anims.create(a);var r={key:"idle",frames:this.anims.generateFrameNumbers("playerSprite",{frames:[0]}),frameRate:15,repeat:-1};this.anims.create(r),this.cameras.main.setBounds(0,0,1e4,1e4),this.pointerado=this.input.activePointer,this.instance1=A(5e3),this.instance2=A(1e3),this.instance3=A(100),this.lastUpdate=Date.now(),this.dt=0,this.headPosition=new x.a.Geom.Point(100,100),this.input.mouse.disableContextMenu(),this.input.on("pointerup",(function(t){if(t.leftButtonReleased()){var i,a,r,n,l;e.allPlayers[e.currentPlayerId].sprite&&"running"!==(null===(i=e.allPlayers)||void 0===i||null===(a=i[e.currentPlayerId])||void 0===a||null===(r=a.sprite)||void 0===r||null===(n=r.anims)||void 0===n||null===(l=n.currentAnim)||void 0===l?void 0:l.key)&&(e.allPlayers[e.currentPlayerId].sprite.play({key:"running"}),e.allPlayers[e.currentPlayerId].sprite.x<e.pointerado.worldX?e.allPlayers[e.currentPlayerId].sprite.flipX=!1:e.allPlayers[e.currentPlayerId].sprite.flipX=!0);var s={x:Math.round(t.worldX),y:Math.round(t.worldY)};e.allPlayers[e.currentPlayerId].target=s,L.emit("player click",s)}})),this.input.on("pointerdown",(function(t){if(t.leftButtonReleased()){var i={x:t.worldX,y:t.worldY};e.allPlayers[e.currentPlayerId].target=i}})),this.playerInputClient={},this.playerInputClient.keyQ=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.Q),this.playerInputClient.keyW=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.W),this.playerInputClient.keyE=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.E),this.playerInputClient.keyR=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.R),this.playerInputClient.keyD=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.D),this.playerInputClient.keyF=this.input.keyboard.addKey(x.a.Input.Keyboard.KeyCodes.F),L.on("update state",(function(t){var i=t.players,a=Date.now();e.dt=(a-e.lastUpdate)/(1e3/30),e.lastUpdate=a,i.forEach((function(t){var i,a,r,n,l,s,o,d,u,c,p,y,h,f,m,v,g,P,b,k,w,x,O;(null!==(i=e.allPlayers)&&void 0!==i&&i[t.id]||(e.allPlayers[t.id]={sprite:e.add.sprite(t.position.x,t.position.y,"playerSprite"),playerId:t.id,transform:{x:t.position.x,y:t.position.y},target:{x:t.position.x,y:t.position.y},skills:null}),null===(a=t.skills)||void 0===a||!a.y||null===(r=t.skills)||void 0===r||!r.x||null!==(n=e.allPlayers)&&void 0!==n&&n[t.id].skills?null===t.skills&&null!==(l=e.allPlayers)&&void 0!==l&&l[t.id].skills&&(e.allPlayers[t.id].skills.destroy(),e.allPlayers[t.id].skills=null):e.allPlayers[t.id].skills=e.add.sprite(t.skills.x,t.skills.y,"ball"),e.instance1.remainigTime(),isNaN(e.dt))||(null!==(s=e.allPlayers)&&void 0!==s&&null!==(o=s[t.id])&&void 0!==o&&null!==(d=o.skills)&&void 0!==d&&d.x&&null!==(u=e.allPlayers)&&void 0!==u&&null!==(c=u[t.id])&&void 0!==c&&null!==(p=c.skills)&&void 0!==p&&p.y&&null!==(y=t.skills)&&void 0!==y&&y.x&&null!==(h=t.skills)&&void 0!==h&&h.y&&(e.allPlayers[t.id].skills.x=Math.round(K(e.allPlayers[t.id].skills.x,t.skills.x,e.dt)),e.allPlayers[t.id].skills.y=Math.round(K(e.allPlayers[t.id].skills.y,t.skills.y,e.dt))),e.allPlayers[t.id].sprite.x===1/0&&(e.allPlayers[t.id].sprite.x=0),e.allPlayers[t.id].sprite.y===1/0&&(e.allPlayers[t.id].sprite.y=0),e.allPlayers[t.id].transform.x=Math.round(K(e.allPlayers[t.id].sprite.x,t.position.x,e.dt)),e.allPlayers[t.id].transform.y=Math.round(K(e.allPlayers[t.id].sprite.y,t.position.y,e.dt)),e.allPlayers[t.id].target=t.target,"running"!==(null===(f=e.allPlayers)||void 0===f||null===(m=f[t.id])||void 0===m||null===(v=m.sprite)||void 0===v||null===(g=v.anims)||void 0===g||null===(P=g.currentAnim)||void 0===P?void 0:P.key)&&M(e.allPlayers[t.id].sprite,t.target)>20&&e.allPlayers[t.id].sprite.play({key:"running"}),"idle"!==(null===(b=e.allPlayers)||void 0===b||null===(k=b[t.id])||void 0===k||null===(w=k.sprite)||void 0===w||null===(x=w.anims)||void 0===x||null===(O=x.currentAnim)||void 0===O?void 0:O.key)&&M(e.allPlayers[t.id].sprite,t.target)<10&&e.allPlayers[t.id].sprite.play({key:"idle"}),e.allPlayers[t.id].sprite&&(e.allPlayers[t.id].sprite.x<t.target.x?e.allPlayers[t.id].sprite.flipX=!1:e.allPlayers[t.id].sprite.flipX=!0),e.instance1.remainigTime())}));for(var r=function(){var t=Object(O["a"])(l[n],2),a=t[0],r=t[1],s=!1;i.forEach((function(e){a===e.id&&(s=!0)})),s||(r.sprite.destroy(),delete e.allPlayers[a])},n=0,l=Object.entries(e.allPlayers);n<l.length;n++)r()}))}},{key:"update",value:function(){this.input.keyboard.checkDown(this.playerInputClient.keyQ,1e3)&&L.emit("player q");var e=Date.now();this.clientDeltaTime=(e-this.clientLastUpdate)/(1e3/60),this.clientLastUpdate=e,this.correction=this.clientDeltaTime/this.clientLastDeltaTime,this.clientLastDeltaTime=this.clientDeltaTime;for(var t=0,i=Object.entries(this.allPlayers);t<i.length;t++){var a,r,n,l,s,o=Object(O["a"])(i[t],1),d=o[0];if(L.id&&this.allPlayers[L.id].sprite&&(this.currentPlayerId=L.id,this.allPlayers[this.currentPlayerId]&&!this.followingPlayer&&(this.followingPlayer=!0,this.cameras.main&&(this.cameras.main.zoom=2,this.cameras.main.startFollow(this.allPlayers[this.currentPlayerId].sprite,!1,this.clientDeltaTime*this.correction,this.clientDeltaTime*this.correction)))),!isNaN(this.clientDeltaTime))this.allPlayers[d].sprite.x===1/0&&(this.allPlayers[d].sprite.x=0),this.allPlayers[d].sprite.y===1/0&&(this.allPlayers[d].sprite.y=0),M(this.allPlayers[d].sprite,this.allPlayers[d].target)>20&&(this.allPlayers[d].sprite.x=K(this.allPlayers[d].sprite.x,this.allPlayers[d].transform.x,this.clientDeltaTime),this.allPlayers[d].sprite.y=K(this.allPlayers[d].sprite.y,this.allPlayers[d].transform.y,this.clientDeltaTime)),this.instance3.remainigTime(),"running"===(null===(a=this.allPlayers)||void 0===a||null===(r=a[this.currentPlayerId])||void 0===r||null===(n=r.sprite)||void 0===n||null===(l=n.anims)||void 0===l||null===(s=l.currentAnim)||void 0===s?void 0:s.key)&&M(this.allPlayers[this.currentPlayerId].sprite,this.allPlayers[this.currentPlayerId].target)<20&&this.allPlayers[this.currentPlayerId].sprite.play({key:"idle"})}this.pointerado.leftButtonDown()&&!this.pointerado.leftButtonReleased()&&this.instance3.remainigTime()>=100&&(this.allPlayers[this.currentPlayerId].sprite&&(this.allPlayers[this.currentPlayerId].sprite.x<this.pointerado.worldX?this.allPlayers[this.currentPlayerId].sprite.flipX=!1:this.allPlayers[this.currentPlayerId].sprite.flipX=!0),L.emit("player click",{x:Math.round(this.pointerado.worldX),y:Math.round(this.pointerado.worldY)}))}}]),i}(x.a.Scene),X=i("99e5"),R=i.n(X),_=i("1adc"),E=i.n(_),q=i("daa8"),B=Object(q["a"])(window.location.origin,{path:"/gameSocket"}),G={name:"Acropolis",data:function(){return{isLoggedIn:!1}},methods:{initGame:function(){var e=function(){var e=Object(k["a"])(Object(b["a"])().mark((function e(){var t,i,a;return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.once("connect",(function(){B.emit("register",(function(e){console.log("uan chingada",e)}))}));case 2:return t=new R.a(window.ethereum),e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return e.next=7,t.eth.getAccounts();case 7:return i=e.sent[0],e.next=10,E.a.sign((function(e){return t.eth.personal.sign(e,i)}),"1d");case 10:a=e.sent,console.log(a),B.emit("login",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},mounted:function(){var e=this;B.on("loggedIn",(function(t){console.log("leand",t),e.isLoggedIn=t,setTimeout((function(){var e={renderType:3,type:x.a.AUTO,parent:"phaser-example",width:600,height:600,fps:60},t=new x.a.Game(e);t.scene.add("game",S),t.scene.start("game",{socket:B})}),2e3)}))}};i("4c5b");const N=l()(G,[["render",P],["__scopeId","data-v-d76937e4"]]);var U=N,W={name:"Home",components:{Acropolis:U}};const F=l()(W,[["render",p]]);var H=F,Q=[{path:"/",name:"Home",component:H},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],Y=Object(u["a"])({history:Object(u["b"])(),routes:Q}),J=Y;Object(a["b"])(d).use(J).mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},"8dd3":function(e,t,i){},9:function(e,t){},e414:function(e,t,i){"use strict";i("8dd3")}});
//# sourceMappingURL=app.83c46af8.js.map